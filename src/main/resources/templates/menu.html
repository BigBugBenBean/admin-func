<!DOCTYPE html>
<html lang="en" xmlns:th="http://www.thymeleaf.org">

<head>
    <meta charset="UTF-8"></meta>
    <title>e-Services Admin Function</title>

    <script src="/adminfunc/js/lib/jquery-3.3.1.min.js"></script>
    <script src="/adminfunc/js/lib/lodash.min.js"></script>
    <script src="/adminfunc/js/lib/moment.min.js"></script>

    <script src="/adminfunc/js/common.js"></script>

    <link rel="stylesheet" href="/adminfunc/css/style.css"></link>
    <link rel="stylesheet" href="/adminfunc/css/menu.css"></link>

    <script type="text/javascript"   >

        var selectedCat = 1;
        $(function () {
            console.log('ready');

            $('#todayDate').html(today);
            updateNavTitle();

            bindTabChange(".sub-menu", onSubCatSelected);
            bindTabChange(".main-menu > ", onMainCatSelected);


            var hash = window.location.hash;
            if (hash !== '' ) {
                hash = hash.substr(1);
                console.log('hash: ' + hash);

                selectedCat = parseInt(hash);
            }
            $('#main-tab-' + selectedCat).prop('checked', 'checked');
            if ($(".sub-menu > input[type='radio']:checked").length == 0){
                $(".sub-menu > input[type='radio']:first").change().prop( "checked" , 'checked');
            }
        });

    </script>

</head>

<body>
    <div>

        <div th:if="${userDTO}">
            <div class="flex-container">
                <div class="flex-item-1 header-item-left">
                    <span>e-Services-2</span>
                </div>
                <div></div>
                <div class="flex-item-1 header-item-right">
                    <span>| userID: <b th:text="${userDTO.loginId}"></b> |</span>
                    <span>Date:
                    <b id="todayDate"></b>
                </span>
                    <!-- <a th:href="@{/noPerlmission.do}">No Permission</a> -->
                </div>
            </div>
            <div class="grid-container " style="border-radius: 20px 20px 0 0; height: 400px;">
                <div class="main-menu">
                    <th:block th:each="firstLvMenu,firstLvMenuRow : ${MENU.child}">
                        <input th:attr="id=${'main-tab-' + (firstLvMenuRow.index+1)}" th:value="${(firstLvMenuRow.index+1)}" type="radio" name="main-tabs"  />
                        <label th:attr="for=${'main-tab-' + (firstLvMenuRow.index+1)}" class="nav-title nav-border-left" th:text="${firstLvMenu.label}"></label>
                    </th:block>
                    <div style="float: right; " >
                        <a th:href="@{/AUTH/logout.do}" class="">
                            <input type="submit" id="exit-tab" name="" />
                            <label for="exit-tab" class="TopLabel nav-title nav-border-right" ><b th:text="${#messages.msg('umps.adminfunc.nav.exit')}"></b></label>
                        </a >
                    </div>

                    <div th:each="firstLvMenu,firstLvMenuRow : ${MENU.child}" th:attr="id=${'main-content-' + (firstLvMenuRow.index+1)}">
                        <div class="flex-container grid-nav-container">
                            <div class="flex-item-1 nav-title-left">
                                <span th:text="${firstLvMenu.label}" style=" width: 100%">e-Services-2 </span><span> > </span> <span th:attr="class=${#strings.replace(firstLvMenu.label,'-','') + 'SubCat'} "></span>
                            </div>
                        </div>
                        <div class="content-container ">
                            <div class="menu-container flex-container ">
                                <div class="flex-item-1">&nbsp;</div>
                                <div class="sub-menu">
                                    <th:block th:each="secondLvMenu,secondLvMenuRow : ${firstLvMenu.child}">
                                        <input id="sub-tab-" name="sub-tabs-1" th:attrappend="id=${(firstLvMenuRow.index+1)+'-' + (secondLvMenuRow.index+1)}"
                                               th:attr="data=${#strings.replace(firstLvMenu.label,'-','') + '_' + #strings.replace(secondLvMenu.label,'-','')}" type="radio" />
                                        <label th:attr="for=${'sub-tab-' +(firstLvMenuRow.index+1) + '-' + (secondLvMenuRow.index+1)}" th:text="${secondLvMenu.label}">Enquiry</label>
                                    </th:block>
                                    <th:block th:each="secondLvMenu,secondLvMenuRow : ${firstLvMenu.child}">
                                        <div id="sub-content-" th:attrappend="id=${(firstLvMenuRow.index+1) + '-' + (secondLvMenuRow.index+1)}">
                                            <ul class="func-parent">
                                                <li class="func-child" th:each="thridLvMenu,thridLvMenuRow : ${secondLvMenu.child}" >
                                                    <a class="func-bullet" th:href="${#httpServletRequest.getContextPath()} + ${thridLvMenu.url}" th:text="${thridLvMenu.label}"></a>
                                                </li>
                                            </ul>
                                        </div>
                                    </th:block>
                                </div>
                                <div class="flex-item-1">&nbsp;</div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>

    </div>
</body>

</html>